/**
 * 天文学的定数
 *
 * IAU（国際天文学連合）および現代天文学で使用される標準的な定数値
 */

// ==============================================
// 時間関連定数
// ==============================================

/** J2000.0 エポック（ユリウス日） */
export const J2000_EPOCH = 2451545.0;

/** J2000.0 基準新月（2000-01-06T18:14:00Z） */
export const J2000_NEW_MOON = new Date('2000-01-06T18:14:00Z');

/** 朔望月（日）- IAU天文定数 */
export const SYNODIC_MONTH = 29.530588853;

/** 1世紀のユリウス日数 */
export const JULIAN_CENTURY = 36525.0;

// ==============================================
// 太陽関連定数
// ==============================================

/** 太陽の平均経度係数（J2000.0での値と年変化率） */
export const SOLAR_MEAN_LONGITUDE = {
  /** J2000.0での平均経度（度） */
  EPOCH: 280.46646,
  /** 1世紀あたりの変化率（度/世紀） */
  RATE: 36000.76983,
  /** 2次項係数（度/世紀²） */
  RATE2: 0.0003032
};

/** 太陽の平均近点角係数 */
export const SOLAR_MEAN_ANOMALY = {
  EPOCH: 357.52911,
  RATE: 35999.05029,
  RATE2: -0.0001537
};

/** 太陽軌道の離心率（時間変化考慮） */
export const SOLAR_ECCENTRICITY = {
  EPOCH: 0.016708634,
  RATE: -0.000042037,
  RATE2: -0.0000001267
};

/** 太陽の中心差係数（楕円軌道補正） */
export const SOLAR_CENTER_EQUATION = {
  C1: { EPOCH: 1.914602, RATE: -0.004817, RATE2: -0.000014 },
  C2: { EPOCH: 0.019993, RATE: -0.000101 },
  C3: { EPOCH: 0.000289 }
};

// ==============================================
// 月関連定数
// ==============================================

/** 月の平均経度係数 */
export const LUNAR_MEAN_LONGITUDE = {
  EPOCH: 218.3164477,
  RATE: 481267.88123421,
  RATE2: -0.0015786,
  RATE3: 1 / 538841,
  RATE4: -1 / 65194000
};

/** 月の平均距角係数（月と太陽の平均経度差） */
export const LUNAR_MEAN_ELONGATION = {
  EPOCH: 297.8501921,
  RATE: 445267.1114034,
  RATE2: -0.0018819,
  RATE3: 1 / 545868,
  RATE4: -1 / 113065000
};

/** 月の平均近点角係数 */
export const LUNAR_MEAN_ANOMALY = {
  EPOCH: 134.9633964,
  RATE: 477198.8675055,
  RATE2: 0.0087414,
  RATE3: 1 / 69699,
  RATE4: -1 / 14712000
};

/** 月の平均昇交点引数係数 */
export const LUNAR_ARGUMENT_OF_LATITUDE = {
  EPOCH: 93.2720950,
  RATE: 483202.0175233,
  RATE2: -0.0036539,
  RATE3: -1 / 3526000,
  RATE4: 1 / 863310000
};

/** 月の地心距離（km） */
export const LUNAR_DISTANCE = {
  /** 平均距離 */
  MEAN: 385000.56,
  /** 最小距離（近地点） */
  MIN: 356500,
  /** 最大距離（遠地点） */
  MAX: 406700
};

// ==============================================
// ELP2000 月位置主要項係数
// ==============================================

/** 月経度補正の主要項（振幅・位相・引数係数） */
export const LUNAR_LONGITUDE_TERMS = [
  // [振幅, D, M, Mp, F] - D:平均距角, M:太陽平均近点角, Mp:月平均近点角, F:昇交点引数
  [6.288774, 0, 0, 1, 0],   // 月の楕円項
  [1.274027, 2, 0, -1, 0],  // 蒸発項
  [0.658314, 2, 0, 0, 0],   // 変分項
  [0.213618, 0, 0, 2, 0],   // 年項
  [-0.185116, 0, 1, 0, 0],  // 太陽摂動項
  [-0.114332, 0, 0, 0, 2],  // 月昇交点項
  [0.058793, 2, 0, -2, 0],
  [0.057066, 2, -1, -1, 0],
  [0.053322, 2, 0, 1, 0],
  [0.045758, 2, -1, 0, 0]
];

/** 月緯度補正の主要項 */
export const LUNAR_LATITUDE_TERMS = [
  [5.128122, 0, 0, 0, 1],
  [0.280602, 0, 0, 1, 1],
  [0.277693, 0, 0, 1, -1],
  [0.173237, 2, 0, 0, -1],
  [0.055413, 2, 0, -1, 1],
  [0.046271, 2, 0, -1, -1],
  [0.032573, 2, 0, 0, 1],
  [0.017198, 0, 0, 2, 1]
];

/** 月距離補正の主要項 */
export const LUNAR_DISTANCE_TERMS = [
  [-20905.355, 0, 0, 1, 0],
  [-3699.111, 2, 0, -1, 0],
  [-2955.968, 2, 0, 0, 0],
  [-569.925, 0, 0, 2, 0],
  [48.888, 0, 1, 0, 0],
  [-3.149, 0, 0, 0, 2],
  [246.158, 2, 0, -2, 0],
  [-152.138, 2, -1, -1, 0],
  [-170.733, 2, 0, 1, 0],
  [-204.586, 2, -1, 0, 0]
];

// ==============================================
// 月相分類定数
// ==============================================

/** 月相判定の境界値（月齢日数） */
export const MOON_PHASE_BOUNDARIES = {
  NEW_MOON: 1.84566,           // 新月→上弦三日月
  WAXING_CRESCENT: 5.53699,    // 上弦三日月→上弦
  FIRST_QUARTER: 9.22831,      // 上弦→上弦凸月
  WAXING_GIBBOUS: 12.91963,    // 上弦凸月→満月
  FULL_MOON: 16.61096,         // 満月→下弦凸月
  WANING_GIBBOUS: 20.30228,    // 下弦凸月→下弦
  LAST_QUARTER: 23.99361,      // 下弦→下弦三日月
  WANING_CRESCENT: 27.68493    // 下弦三日月→新月
};

// ==============================================
// 精度・制限定数
// ==============================================

/** 計算精度の目標値 */
export const ACCURACY_TARGETS = {
  /** 月齢精度（日） */
  MOON_AGE: 0.1,
  /** 太陽経度精度（度） */
  SOLAR_LONGITUDE: 1.0,
  /** 月経度精度（度） */
  LUNAR_LONGITUDE: 2.0,
  /** 月距離精度（km） */
  LUNAR_DISTANCE: 1000
};

/** 計算の有効期間制限 */
export const CALCULATION_LIMITS = {
  /** 最小年（グレゴリオ暦） */
  MIN_YEAR: 1900,
  /** 最大年（グレゴリオ暦） */
  MAX_YEAR: 2100,
  /** 最大計算時間（ミリ秒） */
  MAX_CALCULATION_TIME: 50
};

// ==============================================
// 物理定数
// ==============================================

/** 数学・物理定数 */
export const MATH_CONSTANTS = {
  /** 度→ラジアン変換係数 */
  DEG_TO_RAD: Math.PI / 180,
  /** ラジアン→度変換係数 */
  RAD_TO_DEG: 180 / Math.PI,
  /** 2π */
  TWO_PI: 2 * Math.PI
};