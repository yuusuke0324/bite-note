# TASK-201: ResponsiveChartContainerå®Ÿè£… - è¦ä»¶å®šç¾©

## æ¦‚è¦

ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œãƒãƒ£ãƒ¼ãƒˆã‚³ãƒ³ãƒ†ãƒŠã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®Ÿè£…ã™ã‚‹ã€‚ç”»é¢ã‚µã‚¤ã‚ºã«å¿œã˜ãŸSVGã‚µã‚¤ã‚ºè¨ˆç®—ã€æœ€å°ã‚µã‚¤ã‚ºä¿è¨¼ã€ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ç¶­æŒæ©Ÿèƒ½ã‚’å«ã‚€åŒ…æ‹¬çš„ãªãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ã‚·ã‚¹ãƒ†ãƒ ã€‚

## ğŸ¯ å®Ÿè£…ç›®æ¨™

### ä¸»è¦æ©Ÿèƒ½
1. **ç”»é¢ã‚µã‚¤ã‚ºæ¤œå‡ºãƒ»SVGã‚µã‚¤ã‚ºè¨ˆç®—é€£æº** - TASK-001ã¨ã®çµ±åˆ
2. **æœ€å°ã‚µã‚¤ã‚ºä¿è¨¼** - è»¸ãƒ©ãƒ™ãƒ«ç¢ºå®Ÿè¡¨ç¤ºï¼ˆ600x300pxï¼‰
3. **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å‹•ä½œ** - ã‚¹ãƒ ãƒ¼ã‚ºãªã‚µã‚¤ã‚ºå¤‰æ›´
4. **ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ç¶­æŒ** - 2:1 (width:height) åŸºæœ¬æ¯”ç‡

## ğŸ“‹ è©³ç´°è¦ä»¶

### REQ-301: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–è¡¨ç¤º

#### R301-01: è‡ªå‹•ã‚µã‚¤ã‚ºèª¿æ•´
- **å¿…é ˆ**: è¦ªã‚³ãƒ³ãƒ†ãƒŠã‚µã‚¤ã‚ºã«åŸºã¥ãè‡ªå‹•ã‚µã‚¤ã‚ºè¨ˆç®—
- **å¯¾è±¡**: SVGã‚³ãƒ³ãƒ†ãƒŠã€ãƒãƒ£ãƒ¼ãƒˆã‚¨ãƒªã‚¢
- **é€£æº**: TASK-001ã®ViewportDetector, SVGSizeCalculatoræ´»ç”¨

#### R301-02: ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆå¯¾å¿œ
- **å¿…é ˆ**: ãƒ‡ãƒã‚¤ã‚¹åˆ¥æœ€é©åŒ–
- **ç¯„å›²**: Mobile(320-767px), Tablet(768-1023px), Desktop(1024px+)
- **å‹•ä½œ**: ãƒ‡ãƒã‚¤ã‚¹åˆ¥è¨­å®šã®è‡ªå‹•é©ç”¨

#### R301-03: å‹•çš„ãƒªã‚µã‚¤ã‚º
- **å¿…é ˆ**: ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºå¤‰æ›´ã¸ã®å³åº§å¯¾å¿œ
- **æ‰‹æ³•**: ResizeObserver APIã¾ãŸã¯windowã‚¤ãƒ™ãƒ³ãƒˆ
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: ãƒ‡ãƒã‚¦ãƒ³ã‚¹å‡¦ç†ï¼ˆ100msï¼‰

### REQ-302: æœ€å°ã‚µã‚¤ã‚ºä¿è¨¼

#### R302-01: è»¸ãƒ©ãƒ™ãƒ«è¡¨ç¤ºä¿è¨¼
- **å¿…é ˆ**: Xè»¸ãƒ»Yè»¸ãƒ©ãƒ™ãƒ«ã®ç¢ºå®Ÿè¡¨ç¤º
- **æœ€å°ã‚µã‚¤ã‚º**: 600x300px
- **å¼·åˆ¶é©ç”¨**: è¦ªã‚³ãƒ³ãƒ†ãƒŠãŒå°ã•ãã¦ã‚‚æœ€å°ã‚µã‚¤ã‚ºã‚’ç¶­æŒ

#### R302-02: èª­ã¿å–ã‚Šå¯èƒ½æ€§ç¢ºä¿
- **å¿…é ˆ**: ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆã€ã‚°ãƒªãƒƒãƒ‰ç·šã®è¦–èªæ€§
- **åˆ¶ç´„**: æœ€å°ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º12px
- **ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«**: å¿…è¦ã«å¿œã˜ã¦æ°´å¹³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾å¿œ

#### R302-03: ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”åˆ¶ç´„
- **æ¨å¥¨**: 2:1 (width:height) åŸºæœ¬æ¯”ç‡
- **èª¿æ•´**: ãƒ‡ãƒã‚¤ã‚¹åˆ¥ã®å¾®èª¿æ•´å¯¾å¿œ
- **åˆ¶é™**: æœ€å°ã‚µã‚¤ã‚ºåˆ¶ç´„ãŒå„ªå…ˆ

## ğŸ—ï¸ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

### ResponsiveChartContainer

#### Props ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
```typescript
interface ResponsiveChartContainerProps {
  children: React.ReactNode;

  // ã‚µã‚¤ã‚ºè¨­å®š
  minWidth?: number;        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 600
  minHeight?: number;       // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 300
  aspectRatio?: number;     // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 2.0

  // ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–è¨­å®š
  responsive?: boolean;     // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: true
  debounceMs?: number;      // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 100

  // ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®š
  className?: string;
  style?: React.CSSProperties;

  // ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
  onSizeChange?: (size: { width: number; height: number }) => void;
  onDeviceChange?: (device: DeviceType) => void;

  // TASK-001é€£æº
  enableViewportDetection?: boolean; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: true
}
```

#### å†…éƒ¨çŠ¶æ…‹ç®¡ç†
```typescript
interface ContainerState {
  // ç¾åœ¨ã®ã‚µã‚¤ã‚º
  containerSize: { width: number; height: number };

  // ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±
  currentDevice: DeviceType;

  // è¨ˆç®—ã•ã‚ŒãŸSVGã‚µã‚¤ã‚º
  svgSize: { width: number; height: number };

  // èª­ã¿è¾¼ã¿çŠ¶æ…‹
  isInitialized: boolean;
}
```

### TASK-001çµ±åˆä»•æ§˜

#### ViewportDetectoré€£æº
```typescript
import { ViewportDetector } from '../../utils/responsive/ViewportDetector';

// ãƒ‡ãƒã‚¤ã‚¹æ¤œå‡º
const detector = new ViewportDetector();
const currentDevice = detector.getCurrentDeviceType();
```

#### SVGSizeCalculatoré€£æº
```typescript
import { SVGSizeCalculator } from '../../utils/responsive/SVGSizeCalculator';

// ã‚µã‚¤ã‚ºè¨ˆç®—
const calculator = new SVGSizeCalculator();
const svgSize = calculator.calculateSize(containerSize, {
  minWidth: 600,
  minHeight: 300,
  aspectRatio: 2.0,
  device: currentDevice
});
```

#### MarginCalculatoré€£æº
```typescript
import { MarginCalculator } from '../../utils/responsive/MarginCalculator';

// ãƒãƒ¼ã‚¸ãƒ³è¨ˆç®—
const marginCalc = new MarginCalculator();
const margins = marginCalc.calculate(svgSize, {
  device: currentDevice,
  hasXAxis: true,
  hasYAxis: true
});
```

## ğŸ¨ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­è¨ˆ

### HTMLæ§‹é€ 
```html
<div class="responsive-chart-container" data-device="{device}">
  <div class="chart-wrapper" style="width: {calculatedWidth}px; height: {calculatedHeight}px;">
    <div class="chart-content" style="width: {svgWidth}px; height: {svgHeight}px;">
      {children}
    </div>
  </div>
</div>
```

### CSSè¨­è¨ˆï¼ˆCSS-in-JSï¼‰
```typescript
const containerStyles = {
  width: '100%',
  height: '100%',
  overflow: 'hidden',
  position: 'relative' as const,

  '&[data-device="mobile"]': {
    // ãƒ¢ãƒã‚¤ãƒ«å›ºæœ‰ã‚¹ã‚¿ã‚¤ãƒ«
  },

  '&[data-device="tablet"]': {
    // ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆå›ºæœ‰ã‚¹ã‚¿ã‚¤ãƒ«
  },

  '&[data-device="desktop"]': {
    // ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—å›ºæœ‰ã‚¹ã‚¿ã‚¤ãƒ«
  }
};

const chartWrapperStyles = {
  position: 'relative' as const,
  overflow: 'auto',
  minWidth: '{minWidth}px',
  minHeight: '{minHeight}px'
};
```

## ğŸ”§ å®Ÿè£…ä»•æ§˜

### ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†

#### åˆæœŸåŒ–å‡¦ç†
1. **è¦ªã‚³ãƒ³ãƒ†ãƒŠã‚µã‚¤ã‚ºæ¤œå‡º**
2. **ãƒ‡ãƒã‚¤ã‚¹åˆ¤å®š**
3. **åˆæœŸSVGã‚µã‚¤ã‚ºè¨ˆç®—**
4. **ResizeObserverã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**

#### ãƒªã‚µã‚¤ã‚ºå‡¦ç†
1. **ã‚µã‚¤ã‚ºå¤‰æ›´æ¤œå‡º**
2. **ãƒ‡ãƒã‚¦ãƒ³ã‚¹å‡¦ç†é©ç”¨**
3. **æ–°ã‚µã‚¤ã‚ºè¨ˆç®—**
4. **çŠ¶æ…‹æ›´æ–°ãƒ»å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°**

#### ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å‡¦ç†
1. **ResizeObserverå‰Šé™¤**
2. **ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è§£é™¤**
3. **ã‚¿ã‚¤ãƒãƒ¼ã‚¯ãƒªã‚¢**

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

#### Reactæœ€é©åŒ–
- **React.memo**: ä¸è¦ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é˜²æ­¢
- **useMemo**: ã‚µã‚¤ã‚ºè¨ˆç®—çµæœã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- **useCallback**: ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®æœ€é©åŒ–

#### ãƒªã‚µã‚¤ã‚ºæœ€é©åŒ–
- **ãƒ‡ãƒã‚¦ãƒ³ã‚¹**: 100msãƒ‡ãƒã‚¦ãƒ³ã‚¹ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç¢ºä¿
- **RAF (RequestAnimationFrame)**: ã‚¹ãƒ ãƒ¼ã‚ºãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- **ã‚µã‚¤ã‚ºæ¯”è¼ƒ**: å®Ÿéš›ã®å¤‰æ›´æ™‚ã®ã¿å†è¨ˆç®—

## ğŸ§ª ãƒ†ã‚¹ãƒˆè¦ä»¶

### å˜ä½“ãƒ†ã‚¹ãƒˆ (12å€‹)

#### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ (3å€‹)
1. åŸºæœ¬ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ç¢ºèª
2. ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã‚ˆã‚‹ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¤‰åŒ–
3. childrenã®æ­£å¸¸è¡¨ç¤º

#### ã‚µã‚¤ã‚ºè¨ˆç®—ãƒ†ã‚¹ãƒˆ (4å€‹)
1. æœ€å°ã‚µã‚¤ã‚ºåˆ¶ç´„ã®é©ç”¨
2. ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ç¶­æŒæ©Ÿèƒ½
3. ãƒ‡ãƒã‚¤ã‚¹åˆ¥ã‚µã‚¤ã‚ºèª¿æ•´
4. è¦ªã‚³ãƒ³ãƒ†ãƒŠã‚µã‚¤ã‚ºå¤‰æ›´å¯¾å¿œ

#### ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ†ã‚¹ãƒˆ (3å€‹)
1. ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚µã‚¤ã‚ºå¯¾å¿œ
2. ãƒ‡ãƒã‚¤ã‚¹å¤‰æ›´æ¤œå‡º
3. ãƒ‡ãƒã‚¦ãƒ³ã‚¹æ©Ÿèƒ½ç¢ºèª

#### TASK-001é€£æºãƒ†ã‚¹ãƒˆ (2å€‹)
1. ViewportDetectoré€£æºç¢ºèª
2. SVGSizeCalculatorçµ±åˆç¢ºèª

### çµ±åˆãƒ†ã‚¹ãƒˆ (3å€‹)

#### ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼é€£æºãƒ†ã‚¹ãƒˆ (2å€‹)
1. ç•°ãªã‚‹ç”»é¢ã‚µã‚¤ã‚ºã§ã®å‹•ä½œç¢ºèª
2. ãƒ‡ãƒã‚¤ã‚¹å›è»¢æ™‚ã®æŒ™å‹•ç¢ºèª

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ (1å€‹)
1. å¤§é‡ãƒªã‚µã‚¤ã‚ºã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ç¢ºèª

## ğŸ“¦ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆä»•æ§˜

```typescript
// src/components/chart/container/index.ts
export { ResponsiveChartContainer } from './ResponsiveChartContainer';
export type {
  ResponsiveChartContainerProps,
  ContainerSize,
  ResponsiveChartConfig
} from './types';
```

## âœ… å—ã‘å…¥ã‚ŒåŸºæº–

### æ©Ÿèƒ½è¦ä»¶
- [ ] ç”»é¢ã‚µã‚¤ã‚ºã«å¿œã˜ãŸè‡ªå‹•ã‚µã‚¤ã‚ºèª¿æ•´
- [ ] æœ€å°ã‚µã‚¤ã‚º600x300pxã®ç¢ºå®Ÿä¿è¨¼
- [ ] ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”2:1ã®åŸºæœ¬ç¶­æŒ
- [ ] TASK-001ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã¨ã®å®Œå…¨é€£æº

### å“è³ªè¦ä»¶
- [ ] å…¨ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ï¼ˆ15å€‹ï¼‰ãŒæˆåŠŸã™ã‚‹
- [ ] TypeScript strict mode ã§ã‚¨ãƒ©ãƒ¼ãªã—
- [ ] ESLinté•åãªã—
- [ ] 95%ä»¥ä¸Šã®ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶
- [ ] ãƒªã‚µã‚¤ã‚ºå¿œç­”æ™‚é–“ < 100ms
- [ ] CPUä½¿ç”¨ç‡ é©æ­£ç¯„å›²å†…
- [ ] ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãªã—

### ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£è¦ä»¶
- [ ] ã‚¹ãƒ ãƒ¼ã‚ºãªãƒªã‚µã‚¤ã‚ºã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] å…¨ãƒ‡ãƒã‚¤ã‚¹ã§ã®è»¸ãƒ©ãƒ™ãƒ«è¦–èªæ€§ç¢ºä¿
- [ ] å¿…è¦æ™‚ã®è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾å¿œ

---

**è¦ä»¶å®šç¾©å®Œäº†**: 2025-09-30
**å®Ÿè£…é–‹å§‹**: TASK-201 TDD Step 2/6ã¸
**äºˆæƒ³å®Ÿè£…æœŸé–“**: ç´„2æ™‚é–“