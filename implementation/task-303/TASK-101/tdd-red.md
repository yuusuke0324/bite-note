# TASK-101: TideDataValidatorå®Ÿè£… - Red Phaseï¼ˆå¤±æ•—ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼‰

## Red Phase å®Ÿè¡Œçµæœ

### âœ… Red Phase æˆåŠŸï¼

**ãƒ†ã‚¹ãƒˆçµæœ**: 40/47ãƒ†ã‚¹ãƒˆå¤±æ•—ï¼ˆæœŸå¾…é€šã‚Šã®å¤±æ•—ï¼‰
**å®Ÿè¡Œæ™‚é–“**: 785ms
**å®Ÿè£…æ–¹å¼**: TDD Red Phaseï¼ˆã‚¹ã‚¿ãƒ–å®Ÿè£…ï¼‰

## å®Ÿè£…ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

```
src/components/validation/
â”œâ”€â”€ TideDataValidator.ts          # ãƒ¡ã‚¤ãƒ³ãƒãƒªãƒ‡ãƒ¼ã‚¿ãƒ¼ã‚¯ãƒ©ã‚¹ï¼ˆã‚¹ã‚¿ãƒ–ï¼‰
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ ValidationResult.ts       # æ¤œè¨¼çµæœå‹å®šç¾© âœ…
â”‚   â”œâ”€â”€ ValidationOptions.ts      # ã‚ªãƒ—ã‚·ãƒ§ãƒ³å‹å®šç¾© âœ…
â”‚   â””â”€â”€ index.ts                  # ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ âœ…
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ ErrorCategorizer.ts       # ã‚¨ãƒ©ãƒ¼åˆ†é¡ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆã‚¹ã‚¿ãƒ–ï¼‰
â”‚   â””â”€â”€ WarningGenerator.ts       # è­¦å‘Šç”Ÿæˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆã‚¹ã‚¿ãƒ–ï¼‰
â”œâ”€â”€ index.ts                      # ãƒ¡ã‚¤ãƒ³ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ âœ…
â””â”€â”€ __tests__/
    â”œâ”€â”€ TideDataValidator.test.ts      # ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹ãƒ†ã‚¹ãƒˆ ğŸ”´
    â”œâ”€â”€ ErrorCategorizer.test.ts       # ã‚¨ãƒ©ãƒ¼åˆ†é¡ãƒ†ã‚¹ãƒˆ ğŸ”´
    â”œâ”€â”€ WarningGenerator.test.ts       # è­¦å‘Šç”Ÿæˆãƒ†ã‚¹ãƒˆ ğŸ”´
    â”œâ”€â”€ integration.test.ts            # çµ±åˆãƒ†ã‚¹ãƒˆ ğŸ”´
    â””â”€â”€ helpers.ts                     # ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼ âœ…
```

## ãƒ†ã‚¹ãƒˆå¤±æ•—åˆ†æ

### ğŸŸ¢ æˆåŠŸã—ã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆï¼ˆ7å€‹ï¼‰

1. **ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ãƒ†ã‚¹ãƒˆ** - åŸºæœ¬çš„ãªä¾å­˜æ³¨å…¥ãƒã‚§ãƒƒã‚¯
   - æ­£å¸¸ãªä¾å­˜é–¢ä¿‚ã§ã®åˆæœŸåŒ–æˆåŠŸ
   - nullä¾å­˜é–¢ä¿‚ã§ã®é©åˆ‡ãªã‚¨ãƒ©ãƒ¼
   - å†…éƒ¨çŠ¶æ…‹ã®ä¸€è²«æ€§ç¢ºèª
   - TASK-002ã¨ã®å‹äº’æ›æ€§ç¢ºèª

2. **åŸºæœ¬çš„ãªæ¥µé™æ¡ä»¶ãƒ†ã‚¹ãƒˆ** - æ¥µé™æ¡ä»¶ã¸ã®å¯¾å¿œ
   - æ¥µç«¯ãªã‚¨ãƒ©ãƒ¼æ¡ä»¶ã§ã®ä¾‹å¤–å›é¿ç¢ºèª

### ğŸ”´ æœŸå¾…é€šã‚Šã«å¤±æ•—ã—ã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆï¼ˆ40å€‹ï¼‰

#### 1. TideDataValidatorãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆ20å€‹å¤±æ•—ï¼‰

**validateComprehensively()ãƒ†ã‚¹ãƒˆï¼ˆ8å€‹å¤±æ•—ï¼‰**
- ã‚¹ã‚¿ãƒ–å®Ÿè£…ãŒå¸¸ã«`Error: Not implemented`ã‚’ã‚¹ãƒ­ãƒ¼
- å¤§é‡ãƒ‡ãƒ¼ã‚¿å‡¦ç†æ€§èƒ½ãƒ†ã‚¹ãƒˆå¤±æ•—
- è­¦å‘Šç”Ÿæˆãƒ†ã‚¹ãƒˆå¤±æ•—
- ã‚¨ãƒ©ãƒ¼åˆ†é¡ãƒ†ã‚¹ãƒˆå¤±æ•—

**å…¸å‹çš„ãªå¤±æ•—ä¾‹**:
```
Ã— should return valid result for correct tide data
  â†’ Error: Not implemented

Ã— should process large dataset efficiently
  â†’ Error: Not implemented
```

**validateBasic()ãƒ†ã‚¹ãƒˆï¼ˆ4å€‹å¤±æ•—ï¼‰**
- ã‚¹ã‚¿ãƒ–å®Ÿè£…ãŒå¸¸ã«`{ isValid: false, errors: [] }`ã‚’è¿”ã™
- é«˜é€Ÿå‡¦ç†è¦ä»¶ãƒ†ã‚¹ãƒˆå¤±æ•—
- è­¦å‘Šé™¤å¤–ãƒ†ã‚¹ãƒˆå¤±æ•—

**å…¸å‹çš„ãªå¤±æ•—ä¾‹**:
```
Ã— should return basic validation result quickly
  â†’ expected false to be true

Ã— should detect basic errors without detailed analysis
  â†’ expected 0 to be greater than 0
```

**validateInStages()ãƒ†ã‚¹ãƒˆï¼ˆ4å€‹å¤±æ•—ï¼‰**
- ã‚¹ã‚¿ãƒ–å®Ÿè£…ãŒå¸¸ã«`Error: Not implemented`ã‚’ã‚¹ãƒ­ãƒ¼
- ã‚ªãƒ—ã‚·ãƒ§ãƒ³é©ç”¨ãƒ†ã‚¹ãƒˆå¤±æ•—
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ãƒ†ã‚¹ãƒˆå¤±æ•—

#### 2. ErrorCategorizerãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆï¼ˆ6å€‹å¤±æ•—ï¼‰

- `categorize()`ãƒ¡ã‚½ãƒƒãƒ‰ãŒå¸¸ã«ç©ºé…åˆ—`[]`ã‚’è¿”ã™ã‚¹ã‚¿ãƒ–å®Ÿè£…
- ã‚¨ãƒ©ãƒ¼åˆ†é¡ãƒ»å„ªå…ˆåº¦ä»˜ã‘ãƒ†ã‚¹ãƒˆå…¨å¤±æ•—
- ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±ãƒ†ã‚¹ãƒˆå¤±æ•—

**å…¸å‹çš„ãªå¤±æ•—ä¾‹**:
```
Ã— should categorize critical errors correctly
  â†’ expected [] to have a length of 2

Ã— should provide context information
  â†’ Cannot read properties of undefined (reading 'index')
```

#### 3. WarningGeneratorãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆï¼ˆ6å€‹å¤±æ•—ï¼‰

- `generate()`ãƒ¡ã‚½ãƒƒãƒ‰ãŒå¸¸ã«ç©ºé…åˆ—`[]`ã‚’è¿”ã™ã‚¹ã‚¿ãƒ–å®Ÿè£…
- å¢ƒç•Œå€¤è­¦å‘Šç”Ÿæˆãƒ†ã‚¹ãƒˆå¤±æ•—
- æ™‚ç³»åˆ—ç•°å¸¸æ¤œå‡ºãƒ†ã‚¹ãƒˆå¤±æ•—
- ãƒ‡ãƒ¼ã‚¿å¯†åº¦è­¦å‘Šãƒ†ã‚¹ãƒˆå¤±æ•—

**å…¸å‹çš„ãªå¤±æ•—ä¾‹**:
```
Ã— should generate warnings for boundary values
  â†’ expected [] to have a length of 2

Ã— should detect time sequence anomalies
  â†’ Cannot read properties of undefined (reading 'type')
```

#### 4. çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆ8å€‹å¤±æ•—ï¼‰

**TASK-002é€£æºãƒ†ã‚¹ãƒˆï¼ˆ4å€‹å¤±æ•—ï¼‰**
- ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹ã®ã‚¹ã‚¿ãƒ–å®Ÿè£…ã«ã‚ˆã‚ŠTASK-002é€£æºãƒ†ã‚¹ãƒˆå…¨å¤±æ•—
- ãƒ‡ãƒ¼ã‚¿å¤‰æ›é€£æºãƒ†ã‚¹ãƒˆå¤±æ•—

**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆ4å€‹å¤±æ•—ï¼‰**
- å¤§é‡ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ†ã‚¹ãƒˆå¤±æ•—
- ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ãƒ†ã‚¹ãƒˆå¤±æ•—
- ä¸¦è¡Œå‡¦ç†ãƒ†ã‚¹ãƒˆå¤±æ•—

## Red Phase å®Ÿè£…è©³ç´°

### å®Œå…¨å®Ÿè£…æ¸ˆã¿ï¼ˆGreen Phaseæº–å‚™å®Œäº†ï¼‰

#### types/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
```typescript
// ValidationResult.ts - å®Œå…¨ãªå‹å®šç¾©
export interface ValidationResult {
  isValid: boolean;
  errors: ValidationError[];
  warnings: ValidationWarning[];
  data?: TideChartData[];
  summary: ValidationSummary;
}

export enum ErrorType {
  // Critical, Error, Warning ãƒ¬ãƒ™ãƒ«ã®å®Œå…¨å®šç¾©
}

export enum WarningType {
  // DATA_QUALITY, PERFORMANCE, USABILITY ã®å®Œå…¨å®šç¾©
}
```

#### helpers.ts - ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
```typescript
// ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆé–¢æ•°å®Œå…¨å®Ÿè£…
export function generateValidTideData(count: number): RawTideData[]
export function createStructureError(): Error
export function createWarningError(): Error
```

### ã‚¹ã‚¿ãƒ–å®Ÿè£…ï¼ˆGreen Phaseã§å®Ÿè£…äºˆå®šï¼‰

#### TideDataValidator.ts
```typescript
export class TideDataValidator {
  validateComprehensively(): ValidationResult {
    throw new Error('Not implemented');  // å¸¸ã«ã‚¨ãƒ©ãƒ¼
  }

  validateBasic(): Pick<ValidationResult, 'isValid' | 'errors'> {
    return { isValid: false, errors: [] };  // å¸¸ã«false
  }

  validateInStages(): ValidationResult {
    throw new Error('Not implemented');  // å¸¸ã«ã‚¨ãƒ©ãƒ¼
  }
}
```

#### ErrorCategorizer.ts
```typescript
export class ErrorCategorizer {
  static categorize(): ValidationError[] {
    return [];  // å¸¸ã«ç©ºé…åˆ—
  }
}
```

#### WarningGenerator.ts
```typescript
export class WarningGenerator {
  static generate(): ValidationWarning[] {
    return [];  // å¸¸ã«ç©ºé…åˆ—
  }
}
```

## ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹åˆ†æ

### å„ªå…ˆåº¦ã®é«˜ã„å¤±æ•—ãƒ†ã‚¹ãƒˆï¼ˆGreen Phaseã§æœ€åˆã«ä¿®æ­£ï¼‰

1. **åŸºæœ¬æ¤œè¨¼æ©Ÿèƒ½**
   - `validateComprehensively()`ã®åŸºæœ¬å®Ÿè£…
   - `validateBasic()`ã®é«˜é€Ÿæ¤œè¨¼å®Ÿè£…
   - ã‚¨ãƒ©ãƒ¼ãƒ»è­¦å‘Šã®åˆ†é¡æ©Ÿèƒ½

2. **TASK-002é€£æº**
   - TideDataValidator, TideDataTransformerã¨ã®çµ±åˆ
   - ã‚¨ãƒ©ãƒ¼å‹ã®é©åˆ‡ãªåˆ†é¡
   - ãƒ‡ãƒ¼ã‚¿å¤‰æ›ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

3. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**
   - Critical/Error/Warning ãƒ¬ãƒ™ãƒ«ã®å‡¦ç†
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆ
   - ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±ã®ä¿æŒ

### ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ï¼ˆRefactor Phaseã§å¯¾å¿œï¼‰

1. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**
   - 10,000ä»¶ â†’ 3ç§’ä»¥å†…å‡¦ç†
   - å¤§é‡ãƒ‡ãƒ¼ã‚¿ã§ã®ãƒ¡ãƒ¢ãƒªåŠ¹ç‡
   - ä¸¦è¡Œå‡¦ç†å¯¾å¿œ

2. **é«˜åº¦ãªæ¤œè¨¼æ©Ÿèƒ½**
   - å³å¯†ãƒ¢ãƒ¼ãƒ‰
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰
   - ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªæ¤œè¨¼ã‚ªãƒ—ã‚·ãƒ§ãƒ³

## Red Phase æˆåŠŸåˆ¤å®š

### âœ… æˆåŠŸåŸºæº–é”æˆ

1. **å…¨ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆå®Œäº†**: 47å€‹ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
2. **æœŸå¾…é€šã‚Šã®å¤±æ•—**: 40å€‹ã®ãƒ†ã‚¹ãƒˆãŒå®Ÿè£…ãªã—ã§å¤±æ•—
3. **åŸºç›¤ã‚³ãƒ¼ãƒ‰å‹•ä½œ**: å‹å®šç¾©ã€ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼ã¯å®Œå…¨ã«å‹•ä½œ
4. **å‹å®‰å…¨æ€§ç¢ºä¿**: TypeScript strict modeå¯¾å¿œ
5. **ãƒ†ã‚¹ãƒˆå®Ÿè¡Œç’°å¢ƒ**: æ­£å¸¸ã«å‹•ä½œ

### ğŸ“Š Red Phase çµ±è¨ˆ

| ã‚«ãƒ†ã‚´ãƒª | ä½œæˆæ•° | å¤±æ•—æ•° | æˆåŠŸç‡ï¼ˆæœŸå¾…ï¼‰ |
|----------|---------|---------|-----------------|
| å‹å®šç¾©ãƒ»åŸºç›¤ | 7 | 0 | 100%ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰ |
| ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹ | 20 | 18 | 10%ï¼ˆæœŸå¾…é€šã‚Šï¼‰ |
| ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ | 12 | 12 | 0%ï¼ˆæœŸå¾…é€šã‚Šï¼‰ |
| çµ±åˆãƒ†ã‚¹ãƒˆ | 8 | 6 | 25%ï¼ˆæœŸå¾…é€šã‚Šï¼‰ |
| **åˆè¨ˆ** | **47** | **40** | **15%ï¼ˆæœŸå¾…å€¤ï¼‰** |

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—: Green Phase

### ğŸš€ Green Phase å®Ÿè£…è¨ˆç”»

1. **å„ªå…ˆé †ä½1: TideDataValidatoråŸºæœ¬å®Ÿè£…**
   - `validateComprehensively()` - åŒ…æ‹¬çš„æ¤œè¨¼ãƒ­ã‚¸ãƒƒã‚¯
   - `validateBasic()` - é«˜é€Ÿæ¤œè¨¼ãƒ­ã‚¸ãƒƒã‚¯
   - `validateInStages()` - æ®µéšçš„æ¤œè¨¼ãƒ­ã‚¸ãƒƒã‚¯

2. **å„ªå…ˆé †ä½2: ã‚¨ãƒ©ãƒ¼ãƒ»è­¦å‘Šå‡¦ç†å®Ÿè£…**
   - `ErrorCategorizer.categorize()` - ã‚¨ãƒ©ãƒ¼åˆ†é¡å®Ÿè£…
   - `WarningGenerator.generate()` - è­¦å‘Šç”Ÿæˆå®Ÿè£…
   - TASK-002ã‚¨ãƒ©ãƒ¼ã®é©åˆ‡ãªåˆ†é¡

3. **å„ªå…ˆé †ä½3: TASK-002çµ±åˆå®Ÿè£…**
   - TideDataValidator, TideDataTransformerã¨ã®é€£æº
   - ãƒ‡ãƒ¼ã‚¿å¤‰æ›ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
   - ã‚¨ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®ä¿æŒ

### ğŸ¯ Green Phase ç›®æ¨™

- **ç›®æ¨™ãƒ†ã‚¹ãƒˆæˆåŠŸç‡**: 90%ä»¥ä¸Šï¼ˆ42/47ãƒ†ã‚¹ãƒˆæˆåŠŸï¼‰
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™**: 10,000ä»¶å‡¦ç† < 3ç§’
- **ãƒ¡ãƒ¢ãƒªç›®æ¨™**: å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®5å€ä»¥ä¸‹

## Red Phase å®Œäº†å®£è¨€

âœ… **TASK-101 Red Phase æ­£å¼å®Œäº†**

- 47å€‹ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆå®Œäº†
- 40å€‹ã®æœŸå¾…é€šã‚Šã®å¤±æ•—ç¢ºèª
- åŸºç›¤ã‚³ãƒ¼ãƒ‰ï¼ˆå‹å®šç¾©ã€ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼ï¼‰å®Œå…¨å®Ÿè£…
- Green Phaseå®Ÿè£…æº–å‚™å®Œäº†

**æŠ€è¡“çš„æˆæœ**:
- åŒ…æ‹¬çš„ãªå‹å®šç¾©ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰
- 47å€‹ã®è©³ç´°ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ
- TASK-002ã¨ã®çµ±åˆåŸºç›¤æº–å‚™
- ã‚¨ãƒ©ãƒ¼åˆ†é¡ãƒ»è­¦å‘Šç”Ÿæˆã®è¨­è¨ˆå®Œäº†

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**: Green Phaseï¼ˆæœ€å°å®Ÿè£…ï¼‰å®Ÿè¡Œæº–å‚™å®Œäº†

---

**Red Phase å®Œäº†æ™‚åˆ»**: 2025-01-29T10:02:00Z
**å®Ÿè£…æœŸé–“**: è¦ä»¶å®šç¾©å¾Œ ç´„20åˆ†
**ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå›æ•°**: 1å›ï¼ˆæœŸå¾…é€šã‚Šã®å¤±æ•—ç¢ºèªï¼‰