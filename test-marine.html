<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ·é¢æ°´æ¸©å–å¾—ãƒ†ã‚¹ãƒˆ</title>
</head>
<body>
    <h1>ğŸŒŠ æµ·é¢æ°´æ¸©å–å¾—ãƒ†ã‚¹ãƒˆ</h1>
    <div id="result">çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...</div>

    <script>
        async function testMarineData() {
            try {
                // å±±å£çœŒé•·é–€å¸‚ä»˜è¿‘ã®åº§æ¨™
                const coordinates = {
                    latitude: 34.3704,
                    longitude: 131.1873
                };

                console.log('ğŸŒŠ æµ·é¢æ°´æ¸©å–å¾—ãƒ†ã‚¹ãƒˆé–‹å§‹...');
                console.log('ğŸ“ åº§æ¨™:', coordinates);

                // Open-Meteo Marine API ã‚’ç›´æ¥å‘¼ã³å‡ºã—
                const url = `https://marine-api.open-meteo.com/v1/marine?latitude=${coordinates.latitude}&longitude=${coordinates.longitude}&current=sea_surface_temperature,wave_height,wave_direction&timezone=Asia%2FTokyo`;

                console.log('ğŸ”— API URL:', url);

                const response = await fetch(url);
                const data = await response.json();

                console.log('ğŸ“Š å–å¾—ãƒ‡ãƒ¼ã‚¿:', data);

                // çµæœã‚’ç”»é¢ã«è¡¨ç¤º
                const resultDiv = document.getElementById('result');
                resultDiv.innerHTML = `
                    <h2>ğŸŒŠ æµ·æ´‹ãƒ‡ãƒ¼ã‚¿å–å¾—çµæœ</h2>
                    <p><strong>ğŸŒ¡ï¸ æµ·é¢æ°´æ¸©:</strong> ${data.current.sea_surface_temperature}Â°C</p>
                    <p><strong>ğŸŒŠ æ³¢é«˜:</strong> ${data.current.wave_height}m</p>
                    <p><strong>ğŸ§­ æ³¢å‘ã:</strong> ${data.current.wave_direction}Â°</p>
                    <p><strong>ğŸ•’ å–å¾—æ™‚åˆ»:</strong> ${data.current.time}</p>
                    <p><strong>ğŸ“ åº§æ¨™:</strong> ${data.latitude}, ${data.longitude}</p>
                    <hr>
                    <h3>ğŸ“‹ JSONãƒ‡ãƒ¼ã‚¿:</h3>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                `;

                console.log('âœ… æµ·é¢æ°´æ¸©å–å¾—æˆåŠŸï¼');
                console.log(`ğŸŒ¡ï¸ æµ·é¢æ°´æ¸©: ${data.current.sea_surface_temperature}Â°C`);
                console.log(`ğŸŒŠ æ³¢é«˜: ${data.current.wave_height}m`);
                console.log(`ğŸ§­ æ³¢å‘ã: ${data.current.wave_direction}Â°`);

            } catch (error) {
                console.error('âŒ æµ·é¢æ°´æ¸©å–å¾—ã‚¨ãƒ©ãƒ¼:', error);
                document.getElementById('result').innerHTML = `
                    <h2>âŒ ã‚¨ãƒ©ãƒ¼</h2>
                    <p>${error.message}</p>
                `;
            }
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        window.addEventListener('load', testMarineData);
    </script>
</body>
</html>