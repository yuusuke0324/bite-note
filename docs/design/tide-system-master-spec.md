# æ½®æ±ã‚·ã‚¹ãƒ†ãƒ  ãƒã‚¹ã‚¿ãƒ¼ä»•æ§˜æ›¸

> **Single Source of Truth**: æ½®æ±æƒ…å ±ã‚·ã‚¹ãƒ†ãƒ ã®åŒ…æ‹¬çš„è¨­è¨ˆæ›¸
>
> **æœ€çµ‚æ›´æ–°**: 2025å¹´10æœˆ25æ—¥
> **ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v1.1
> **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: è¨­è¨ˆå®Œäº†ãƒ»å®Ÿè£…å®Œäº†ãƒ»æ½®æ±åˆ†é¡ç²¾åº¦å‘ä¸Šæ¸ˆ

## ğŸ“‹ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### ãƒ“ã‚¸ãƒ§ãƒ³
**å®Œå…¨ç„¡æ–™ãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ»ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ**ã®æ½®æ±æƒ…å ±ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚Šã€é‡£æœè¨˜éŒ²ã«ç¾ã—ã„æ½®æ±å¯è¦–åŒ–ã‚’çµ±åˆã—ã€é‡£ã‚ŠäººãŒã€Œã„ã¤é‡£ã‚ŒãŸã®ã‹ã€ã¨ã€Œãã®æ™‚ã®æ½®ã®çŠ¶æ…‹ã€ã‚’ç›´æ„Ÿçš„ã«ç†è§£ã§ãã‚‹UXã‚’æä¾›ã™ã‚‹ã€‚

### è¦ä»¶å®šç¾©

#### æ©Ÿèƒ½è¦ä»¶
- âœ… **æ½®æ±ã‚¿ã‚¤ãƒ—è­˜åˆ¥**: å¤§æ½®ãƒ»ä¸­æ½®ãƒ»å°æ½®ãƒ»é•·æ½®ãƒ»è‹¥æ½®ã®è‡ªå‹•åˆ¤å®š
- âœ… **æº€æ½®ãƒ»å¹²æ½®æ™‚åˆ»**: é‡£ã‚ŒãŸæ™‚é–“å¸¯ã¨ã®é–¢ä¿‚æ€§ã‚’è¡¨ç¤º
- âœ… **åœ°åŸŸå˜ä½ã§ã®å–å¾—**: é‡£ã‚Šå ´ã®ä½ç½®æƒ…å ±ã«åŸºã¥ãæœ€é©åŒ–
- âœ… **å®Œå…¨ç„¡æ–™**: APIæ–™é‡‘ãƒ»ãƒ©ã‚¤ã‚»ãƒ³ã‚¹è²»ç”¨ä¸€åˆ‡ãªã—
- âœ… **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ **: ç¬æ™‚è¨ˆç®—ã«ã‚ˆã‚‹å³åº§ã®æƒ…å ±æä¾›
- âœ… **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ**: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸è¦ã§å®Œå…¨å‹•ä½œ

#### éæ©Ÿèƒ½è¦ä»¶
- **ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“**: åˆå›è¨ˆç®—200msä»¥å†…ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ10msä»¥å†…
- **ç²¾åº¦**: é‡£ã‚Šç”¨é€”ã«ååˆ†ï¼ˆÂ±30åˆ†ç¨‹åº¦ï¼‰
- **å¯¾å¿œåœ°åŸŸ**: æ—¥æœ¬å…¨å›½ä¸»è¦é‡£ã‚Šå ´50ç®‡æ‰€
- **ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ**: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ»ã‚¿ãƒƒãƒæ“ä½œæœ€é©åŒ–

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ–¹é‡
```
Zero API Dependency + Hybrid Calculation + Beautiful Visualization
```

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 3å±¤æ§‹é€ è¨­è¨ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   UI/UX Layer                           â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ ã‚¿ã‚¤ãƒ‰ã‚°ãƒ©ãƒ• â”‚  â”‚ é‡£æœè¨˜éŒ²     â”‚  â”‚ ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰â”‚      â”‚
â”‚  â”‚ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆâ”‚  â”‚ çµ±åˆUI      â”‚  â”‚ è¡¨ç¤º         â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                         â”‚
â”‚  â€¢ ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–SVGã‚°ãƒ©ãƒ•                             â”‚
â”‚  â€¢ ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³                                 â”‚
â”‚  â€¢ ã‚¹ãƒ ãƒ¼ã‚ºã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Business Logic Layer                      â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ æ½®æ±äºˆæ¸¬     â”‚  â”‚ æ½®æ±ã‚¿ã‚¤ãƒ—   â”‚  â”‚ æ™‚é–“é–¢ä¿‚     â”‚      â”‚
â”‚  â”‚ ã‚¨ãƒ³ã‚¸ãƒ³     â”‚  â”‚ åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ â”‚  â”‚ è¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³ â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                         â”‚
â”‚  â€¢ æº€æ½®ãƒ»å¹²æ½®æ™‚åˆ»äºˆæ¸¬                                   â”‚
â”‚  â€¢ é‡£æœæ™‚åˆ»ã¨ã®é–¢ä¿‚åˆ†æ                                 â”‚
â”‚  â€¢ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Calculation Engine Layer                     â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ å¤©ä½“è¨ˆç®—     â”‚  â”‚ èª¿å’Œè§£æ     â”‚  â”‚ åœ°åŸŸè£œæ­£     â”‚      â”‚
â”‚  â”‚ ã‚¨ãƒ³ã‚¸ãƒ³     â”‚  â”‚ ã‚¨ãƒ³ã‚¸ãƒ³     â”‚  â”‚ ãƒ‡ãƒ¼ã‚¿       â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                         â”‚
â”‚  â€¢ æœˆé½¢ãƒ»å¤ªé™½æœˆä½ç½®è¨ˆç®—                                 â”‚
â”‚  â€¢ ä¸»è¦6åˆ†æ½®ã«ã‚ˆã‚‹æ½®æ±è¨ˆç®—                              â”‚
â”‚  â€¢ æ—¥æœ¬æ²¿å²¸50ç®‡æ‰€ã®åœ°åŸŸç‰¹æ€§                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§® è¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³è©³ç´°ä»•æ§˜

### 1. å¤©ä½“è¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³

#### æœˆé½¢è¨ˆç®—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
```typescript
class MoonPhaseCalculator {
  /**
   * ãƒ‹ãƒ¥ãƒ¼ã‚«ãƒ å…¬å¼ã«ã‚ˆã‚‹é«˜ç²¾åº¦æœˆé½¢è¨ˆç®—
   * åŸºæº–: J2000.0æ–°æœˆ (2000-01-06T18:14:00Z)
   * æœ”æœ›æœˆ: 29.530588853æ—¥
   */
  calculateMoonAge(date: Date): number {
    const baseNewMoon = new Date('2000-01-06T18:14:00Z');
    const synodicMonth = 29.530588853;
    const diffDays = (date.getTime() - baseNewMoon.getTime()) / (1000 * 60 * 60 * 24);
    return ((diffDays % synodicMonth) + synodicMonth) % synodicMonth;
  }
}
```

#### å¤©ä½“ä½ç½®è¨ˆç®—
- **å¤ªé™½åœ°å¿ƒçµŒåº¦**: VSOP87ç†è«–ã«ã‚ˆã‚‹é«˜ç²¾åº¦è¨ˆç®—
- **æœˆåœ°å¿ƒçµŒåº¦**: ELP2000ç†è«–ç°¡æ˜“ç‰ˆã«ã‚ˆã‚‹å®Ÿç”¨ç²¾åº¦
- **å¤ªé™½æœˆè§’åº¦**: æ½®æ±å¼·åº¦è¨ˆç®—ã«ä½¿ç”¨

### 2. èª¿å’Œè§£æã‚¨ãƒ³ã‚¸ãƒ³

#### ä¸»è¦æ½®æ±æˆåˆ†å®šç¾©
```typescript
const MAJOR_CONSTITUENTS = [
  { name: 'M2', frequency: 28.9841042, amplitude: 1.0, description: 'ä¸»å¤ªé™°åŠæ—¥å‘¨æ½®' },
  { name: 'S2', frequency: 30.0, amplitude: 0.465, description: 'ä¸»å¤ªé™½åŠæ—¥å‘¨æ½®' },
  { name: 'K1', frequency: 15.0410686, amplitude: 0.584, description: 'å¤ªé™°æ—¥å‘¨æ½®' },
  { name: 'O1', frequency: 13.9430356, amplitude: 0.377, description: 'ä¸»å¤ªé™°æ—¥å‘¨æ½®' },
  { name: 'Mf', frequency: 1.0980331, amplitude: 0.174, description: 'å¤ªé™°äºŒé€±é–“æ½®' },
  { name: 'Mm', frequency: 0.5443747, amplitude: 0.097, description: 'å¤ªé™°æœˆæ½®' }
];
```

#### æ½®ä½è¨ˆç®—å¼
```typescript
tideLevel = Î£(Ai Ã— Hi Ã— cos(fi Ã— t + Ï†i + Vi))
```
- `Ai`: åœ°åŸŸæŒ¯å¹…è£œæ­£ä¿‚æ•°
- `Hi`: åŸºæº–æŒ¯å¹…
- `fi`: è§’å‘¨æ³¢æ•°
- `Ï†i`: åœ°åŸŸä½ç›¸è£œæ­£
- `Vi`: å¤©ä½“å¼•æ•°

### 3. åœ°åŸŸè£œæ­£ãƒ‡ãƒ¼ã‚¿

#### æ—¥æœ¬ä¸»è¦é‡£ã‚Šå ´ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
```typescript
const REGIONAL_TIDE_DATA = [
  {
    id: 'tokyo_bay',
    name: 'æ±äº¬æ¹¾',
    location: { lat: 35.6762, lon: 139.6503 },
    m2Amplitude: 1.45,    // å…±é³´ã«ã‚ˆã‚‹æŒ¯å¹…å¢—å¤§
    m2Phase: 25,          // ä½ç›¸é…ã‚Œ
    resonanceFactors: {
      shallow: 1.2,       // æµ…æµ·åŠ¹æœ
      bay: 1.8,           // æ¹¾ã®å…±é³´
      strait: 1.0
    }
  },
  // ... 50ç®‡æ‰€ã®è©³ç´°ãƒ‡ãƒ¼ã‚¿
];
```

#### åœ°åŸŸè£œæ­£ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
1. **æœ€å¯„ã‚Šã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ¤œç´¢**: ãƒãƒãƒ¼ã‚µã‚¤ãƒ³å…¬å¼ã«ã‚ˆã‚‹è·é›¢è¨ˆç®—
2. **æŒ¯å¹…ãƒ»ä½ç›¸è£œæ­£**: åˆ†æ½®ã”ã¨ã®åœ°åŸŸç‰¹æ€§é©ç”¨
3. **åœ°å½¢åŠ¹æœ**: æµ…æµ·ãƒ»æ¹¾ãƒ»æµ·å³¡ã®å…±é³´åŠ¹æœ

## ğŸ¯ æ½®æ±åˆ†é¡ã‚·ã‚¹ãƒ†ãƒ 

### å¤§æ½®ãƒ»å°æ½®åˆ¤å®šï¼ˆ2025å¹´10æœˆæ›´æ–° - å®Ÿæ¸¬ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãç²¾åº¦å‘ä¸Šç‰ˆï¼‰
```typescript
function classifyTideType(moonAge: number): TideType {
  // 29.53ã®å ´åˆã¯0ã¨ã—ã¦æ‰±ã†ï¼ˆæ–°æœˆï¼‰
  let age = moonAge >= 29.53 ? 0 : moonAge;

  // å¤§æ½®ï¼šæ–°æœˆãƒ»æº€æœˆã®å‰å¾Œ2.5æ—¥ï¼ˆæ½®ä½å·®ãŒæœ€å¤§ï¼‰
  // æº€æœˆå‘¨è¾º: æœˆé½¢12.0ï½17.5æ—¥
  // æ–°æœˆå‘¨è¾º: æœˆé½¢0ï½2.5æ—¥ã€27.5ï½29.53æ—¥
  if ((age >= 0 && age <= 2.5) ||
      (age >= 27.5 && age < 29.53) ||
      (age >= 12.0 && age <= 17.5)) {
    return 'å¤§æ½®';
  }

  // å°æ½®ï¼šä¸Šå¼¦ãƒ»ä¸‹å¼¦ã®å‰å¾Œ1.5æ—¥ï¼ˆæ½®ä½å·®ãŒæœ€å°ã«è¿‘ã„ï¼‰
  // ä¸Šå¼¦å‘¨è¾º: æœˆé½¢5.5ï½9.0æ—¥
  // ä¸‹å¼¦å‘¨è¾º: æœˆé½¢20.0ï½24.0æ—¥
  if ((age >= 5.5 && age <= 9.0) ||
      (age >= 20.0 && age <= 24.0)) {
    return 'å°æ½®';
  }

  // é•·æ½®ï¼šå°æ½®ã®å¾Œã®æœŸé–“ï¼ˆæ½®ä½å·®ãŒæœ€å°ã§é•·ãç¶šãï¼‰
  // æœˆé½¢9.0ï½10.5æ—¥ã€24.0ï½25.5æ—¥
  if ((age > 9.0 && age <= 10.5) ||
      (age > 24.0 && age <= 25.5)) {
    return 'é•·æ½®';
  }

  // è‹¥æ½®ï¼šé•·æ½®ã®å¾Œã®æœŸé–“ï¼ˆæ½®ä½å·®ãŒæ¬¡ç¬¬ã«å¤§ãããªã‚‹ï¼‰
  // æœˆé½¢10.5ï½12.0æ—¥ã€25.5ï½27.5æ—¥
  if ((age > 10.5 && age < 12.0) ||
      (age > 25.5 && age < 27.5)) {
    return 'è‹¥æ½®';
  }

  // ä¸­æ½®ï¼šå¤§æ½®ã¨å°æ½®ã®é–“ã®ç§»è¡ŒæœŸ
  // æœˆé½¢2.5ï½5.5æ—¥ã€17.5ï½20.0æ—¥
  return 'ä¸­æ½®';
}
```

**ç²¾åº¦å‘ä¸Šã®æ ¹æ‹ **:
- å¤©æ–‡å­¦çš„äº‹å®Ÿï¼šæº€æœˆï¼ˆæœ›ï¼‰= æœˆé½¢14.77æ—¥ã€æ–°æœˆï¼ˆæœ”ï¼‰= æœˆé½¢0.00æ—¥
- å®Ÿéš›ã®æ½®æ±ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¨ã®ç…§åˆã«ã‚ˆã‚Šã€å¤§æ½®ç¯„å›²ã‚’12.0ï½17.5æ—¥ã«æ‹¡å¤§
- æœˆé½¢12.16æ—¥ã€12.33æ—¥ãªã©æº€æœˆå‰2.5æ—¥ã‚‚å¤§æ½®ã¨ã—ã¦æ­£ç¢ºã«åˆ†é¡
- 2025å¹´10æœˆå®Ÿè£…ãƒ»æ¤œè¨¼å®Œäº†

### æ½®æ±å¼·åº¦è¨ˆç®—
```typescript
// æœˆãƒ»å¤ªé™½ã®åˆæˆåŠ¹æœã«ã‚ˆã‚‹æ½®æ±å¼·åº¦ï¼ˆ0-100%ï¼‰
strength = ((moonEffect + 0.46 * sunEffect) / 1.46 + 1) * 50
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ä»•æ§˜

### çµ±åˆæ½®æ±æƒ…å ±
```typescript
interface HybridTideInfo {
  // åŸºæœ¬æƒ…å ±
  id: string;
  calculatedAt: string;
  location: Location;
  date: string;

  // å¤©ä½“æƒ…å ±
  astronomical: {
    moonAge: number;              // æœˆé½¢
    moonPhase: MoonPhase;         // æœˆç›¸
    sunMoonAngle: number;         // å¤ªé™½-æœˆè§’åº¦
  };

  // æ½®æ±åˆ†é¡
  classification: {
    tideType: TideType;           // å¤§æ½®ãƒ»å°æ½®ç­‰
    strength: number;             // æ½®æ±å¼·åº¦ï¼ˆ0-100ï¼‰
    perigeeApogee: 'perigee' | 'apogee' | 'normal';
  };

  // æ½®æ±ã‚¤ãƒ™ãƒ³ãƒˆ
  events: TideEvent[];

  // åœ°åŸŸæƒ…å ±
  regional: {
    nearestStation: string;
    distanceKm: number;
    correctionApplied: boolean;
  };

  // è¨ˆç®—ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  metadata: {
    algorithm: 'hybrid-astronomical-v1';
    constituents: string[];
    accuracy: 'high' | 'medium' | 'low';
    confidence: number;
  };
}
```

### é‡£æœã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
```typescript
interface TideContext {
  // é‡£æœã¨ã®é–¢ä¿‚
  catchTime: string;
  tidePhase: 'rising' | 'falling' | 'high' | 'low' | 'slack';

  // æ¬¡ã®ã‚¤ãƒ™ãƒ³ãƒˆ
  nextEvent: {
    type: 'high' | 'low';
    time: string;
    timeUntil: string;
    heightDifference: number;
  };

  // æ½®æ±çŠ¶æ…‹
  currentState: {
    phase: string;                // 'ä¸Šã’æ½®ä¸­ç›¤'ç­‰
    velocity: number;             // æ½®æµé€Ÿåº¦æ¨å®š
    optimalFishing: boolean;      // é‡£ã‚Šã«é©ã—ãŸæ™‚é–“å¸¯ã‹
  };
}
```

### é‡£æœè¨˜éŒ²ã¸ã®çµ±åˆ
```typescript
interface FishingRecord {
  // æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  id: string;
  date: string;
  time: string;
  location: Location;
  weather?: WeatherInfo;

  // æ–°è¦è¿½åŠ 
  tideInfo?: HybridTideInfo;     // æ½®æ±æƒ…å ±
  tideContext?: TideContext;     // é‡£ã‚ŒãŸæ™‚é–“å¸¯ã®æ½®æ±ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
}
```

## ğŸ¨ UI/UXãƒ‡ã‚¶ã‚¤ãƒ³ä»•æ§˜

### ã‚¿ã‚¤ãƒ‰ã‚°ãƒ©ãƒ•è¨­è¨ˆ

#### åŸºæœ¬ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒŠ å¤§æ½®  ğŸ“æ±äº¬æ¹¾  ğŸ“…2024-12-22  ğŸŒ™æº€æœˆ                 â”‚ â† ãƒ˜ãƒƒãƒ€ãƒ¼
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ½®ä½                                                  â”‚
â”‚   â†‘                                                   â”‚
â”‚ 2.0m  âˆ©     âˆ©     âˆ©     é‡£ã‚ŒãŸæ™‚åˆ»                     â”‚ â† ãƒ¡ã‚¤ãƒ³ã‚°ãƒ©ãƒ•
â”‚      âˆ• ï¼¼   âˆ• ï¼¼   âˆ• ï¼¼      â†“                        â”‚
â”‚ 1.0m      ï¼¼ âˆ•     ï¼¼ âˆ•     ï¼¼ âˆ•  ğŸ£                    â”‚
â”‚ 0.0m       âˆª       âˆª       âˆª                         â”‚
â”‚      â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤        â”‚
â”‚     00:00 04:00 08:00 12:00 16:00 20:00 24:00        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”´ 06:24 æº€æ½® 1.8m  ğŸ”µ 12:45 å¹²æ½® 0.2m                â”‚ â† ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ
```css
:root {
  /* æ½®æ±ã‚°ãƒ©ãƒ• */
  --tide-high: #4A90E2;         /* æº€æ½®ï¼šæ·±ã„é’ */
  --tide-low: #E24A4A;          /* å¹²æ½®ï¼šèµ¤ */
  --tide-line: #2E7BC6;         /* ã‚°ãƒ©ãƒ•ãƒ©ã‚¤ãƒ³ */
  --tide-fill: rgba(74, 144, 226, 0.1);

  /* æ½®æ±ã‚¿ã‚¤ãƒ— */
  --spring-tide: #FF6B35;       /* å¤§æ½®ï¼šã‚ªãƒ¬ãƒ³ã‚¸ */
  --neap-tide: #4ECDC4;         /* å°æ½®ï¼šãƒ†ã‚£ãƒ¼ãƒ« */
  --medium-tide: #45B7D1;       /* ä¸­æ½®ï¼šæ°´è‰² */

  /* é‡£æœãƒãƒ¼ã‚«ãƒ¼ */
  --catch-marker: #E74C3C;      /* é‡£ã‚ŒãŸæ™‚åˆ»ï¼šèµ¤ */
}
```

### é‡£æœè¨˜éŒ²è©³ç´°ç”»é¢çµ±åˆ

#### ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³è¨­è¨ˆ
```
é­šã®å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
    â†“
è¨˜éŒ²è©³ç´°ç”»é¢è¡¨ç¤º
    â†“
ã€ŒğŸ“Š æ½®æ±ã‚°ãƒ©ãƒ•ã‚’è¡¨ç¤ºã€ãƒœã‚¿ãƒ³
    â†“
ã‚¹ãƒ ãƒ¼ã‚ºã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ300msï¼‰
    â†“
ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚¿ã‚¤ãƒ‰ã‚°ãƒ©ãƒ•è¡¨ç¤º
    â†“
ãƒ›ãƒãƒ¼/ã‚¿ãƒƒãƒ—ã§è©³ç´°æƒ…å ±è¡¨ç¤º
```

#### æ½®æ±ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰
```typescript
<div className="tide-summary-card">
  {/* 4é …ç›®ã‚°ãƒªãƒƒãƒ‰è¡¨ç¤º */}
  <div className="tide-summary-grid">
    <div>ğŸŒŠ å¤§æ½®</div>              {/* æ½®æ±ã‚¿ã‚¤ãƒ— */}
    <div>â¬†ï¸ ä¸Šã’æ½®ä¸­ç›¤</div>          {/* é‡£ã‚ŒãŸæ™‚ã®çŠ¶æ…‹ */}
    <div>ğŸ”´ æ¬¡ã®æº€æ½®ã¾ã§2æ™‚é–“30åˆ†</div> {/* æ¬¡ã®ã‚¤ãƒ™ãƒ³ãƒˆ */}
    <div>ğŸ“Š 85%</div>              {/* æ½®ã®å¼·ã• */}
  </div>

  {/* ä»Šæ—¥ã®æ½®æ±ã‚¤ãƒ™ãƒ³ãƒˆ */}
  <div className="tide-events-mini">
    ğŸ”´ 06:24  ğŸ”µ 12:45  ğŸ”´ 18:52  ğŸ”µ 00:15
  </div>
</div>
```

### ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ–

#### ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆ
```css
/* ãƒ¢ãƒã‚¤ãƒ«ï¼ˆã€œ768pxï¼‰ */
.tide-graph-svg { height: 240px; }
.tide-summary-grid { grid-template-columns: 1fr 1fr; }

/* ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆï¼ˆ768pxã€œ1024pxï¼‰ */
.tide-graph-svg { height: 300px; }
.tide-summary-grid { grid-template-columns: repeat(4, 1fr); }

/* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ï¼ˆ1024pxã€œï¼‰ */
.tide-graph-svg { height: 320px; }
.tide-graph-container { max-width: 800px; margin: 0 auto; }
```

#### ã‚¿ãƒƒãƒæ“ä½œå¯¾å¿œ
- **æœ€å°ã‚¿ãƒƒãƒã‚¿ãƒ¼ã‚²ãƒƒãƒˆ**: 44px Ã— 44px
- **ã‚¹ãƒ¯ã‚¤ãƒ—ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼**: æ™‚é–“è»¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
- **ãƒ”ãƒ³ãƒã‚ºãƒ¼ãƒ **: ã‚°ãƒ©ãƒ•è©³ç´°è¡¨ç¤º

## âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä»•æ§˜

### è¨ˆç®—æœ€é©åŒ–
```typescript
class TideCalculationOptimizer {
  private cache = new Map<string, HybridTideInfo>();

  // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚­ãƒ¼: "ç·¯åº¦,çµŒåº¦,æ—¥ä»˜"ï¼ˆå°æ•°ç‚¹2æ¡ä¸¸ã‚ï¼‰
  generateCacheKey(location: Location, date: Date): string {
    const lat = Math.round(location.latitude * 100) / 100;
    const lon = Math.round(location.longitude * 100) / 100;
    const dateStr = date.toISOString().slice(0, 10);
    return `${lat},${lon},${dateStr}`;
  }

  // LRUã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆæœ€å¤§100ã‚¨ãƒ³ãƒˆãƒªï¼‰
  async calculateOptimized(location: Location, date: Date): Promise<HybridTideInfo> {
    const cacheKey = this.generateCacheKey(location, date);

    if (this.cache.has(cacheKey)) {
      return this.cache.get(cacheKey)!; // 10msä»¥å†…
    }

    const result = await this.performCalculation(location, date); // 200msä»¥å†…

    if (this.cache.size > 100) {
      const firstKey = this.cache.keys().next().value;
      this.cache.delete(firstKey);
    }
    this.cache.set(cacheKey, result);

    return result;
  }
}
```

### ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æœ€é©åŒ–
- **SVGæœ€é©åŒ–**: å¿…è¦æœ€å°é™ã®è¦ç´ æ•°
- **ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³**: CSS transformsã«ã‚ˆã‚‹GPUåŠ é€Ÿ
- **é…å»¶èª­ã¿è¾¼ã¿**: ã‚°ãƒ©ãƒ•ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™
- **åˆå›è¨ˆç®—**: 200msä»¥å†…
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ**: 10msä»¥å†…
- **ã‚°ãƒ©ãƒ•ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°**: 300msä»¥å†…
- **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³å¿œç­”**: 16msä»¥å†…ï¼ˆ60fpsï¼‰

## ğŸ”§ å®Ÿè£…è¨ˆç”»

### Phase 1: è¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³å®Ÿè£…ï¼ˆ2-3æ—¥ï¼‰
1. **å¤©ä½“è¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³**
   - [ ] æœˆé½¢è¨ˆç®—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
   - [ ] å¤ªé™½ãƒ»æœˆä½ç½®è¨ˆç®—
   - [ ] æ½®æ±ã‚¿ã‚¤ãƒ—åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯

2. **èª¿å’Œè§£æã‚¨ãƒ³ã‚¸ãƒ³**
   - [ ] ä¸»è¦åˆ†æ½®å®šç¾©
   - [ ] æ½®ä½è¨ˆç®—é–¢æ•°
   - [ ] æº€æ½®ãƒ»å¹²æ½®æ¤œå‡º

3. **åœ°åŸŸè£œæ­£ã‚·ã‚¹ãƒ†ãƒ **
   - [ ] æ—¥æœ¬æ²¿å²¸ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
   - [ ] æœ€å¯„ã‚Šã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ¤œç´¢
   - [ ] æŒ¯å¹…ãƒ»ä½ç›¸è£œæ­£

### Phase 2: UI/UXã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆ2-3æ—¥ï¼‰
1. **åŸºæœ¬ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**
   - [ ] TideGraph ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
   - [ ] TideSummaryCard ã‚µãƒãƒªãƒ¼è¡¨ç¤º
   - [ ] TideEventsList ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§

2. **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ©Ÿèƒ½**
   - [ ] ãƒ›ãƒãƒ¼ãƒ»ã‚¿ãƒƒãƒ—ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—
   - [ ] é‡£æœæ™‚åˆ»ãƒãƒ¼ã‚«ãƒ¼
   - [ ] ã‚¹ãƒ ãƒ¼ã‚ºã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

3. **ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ–**
   - [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³
   - [ ] ã‚¿ãƒƒãƒæ“ä½œå¯¾å¿œ
   - [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### Phase 3: é‡£æœè¨˜éŒ²çµ±åˆï¼ˆ1-2æ—¥ï¼‰
1. **ãƒ‡ãƒ¼ã‚¿çµ±åˆ**
   - [ ] FishingRecordæ‹¡å¼µ
   - [ ] TideContextè¨ˆç®—
   - [ ] æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ

2. **UIçµ±åˆ**
   - [ ] è¨˜éŒ²è©³ç´°ç”»é¢æ‹¡å¼µ
   - [ ] ãƒ•ã‚©ãƒ¼ãƒ çµ±åˆ
   - [ ] ä¸€è¦§è¡¨ç¤ºå¯¾å¿œ

### Phase 4: ãƒ†ã‚¹ãƒˆãƒ»æœ€é©åŒ–ï¼ˆ1æ—¥ï¼‰
1. **ãƒ†ã‚¹ãƒˆå®Ÿè£…**
   - [ ] ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
   - [ ] çµ±åˆãƒ†ã‚¹ãƒˆ
   - [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

2. **æœ€çµ‚èª¿æ•´**
   - [ ] UI/UXãƒãƒªãƒƒã‚·ãƒ¥
   - [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
   - [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™

## ğŸ“‹ å“è³ªä¿è¨¼

### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥
```typescript
describe('HybridTideSystem', () => {
  test('æœˆé½¢è¨ˆç®—ç²¾åº¦', () => {
    // æ—¢çŸ¥ã®æ–°æœˆãƒ»æº€æœˆæ—¥ã§ã®æ¤œè¨¼
  });

  test('æ½®æ±äºˆæ¸¬ç²¾åº¦', () => {
    // æ°—è±¡åºãƒ‡ãƒ¼ã‚¿ã¨ã®æ¯”è¼ƒæ¤œè¨¼
  });

  test('UI ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ€§èƒ½', () => {
    // 200msä»¥å†…ã§ã®è¨ˆç®—å®Œäº†æ¤œè¨¼
  });
});
```

### ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£
- **ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ**: SVGè¦ç´ ã®aria-label
- **ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ**: Tab/Enter/SpaceãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- **ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆ**: WCAG 2.1 AAæº–æ‹ ï¼ˆ4.5:1ä»¥ä¸Šï¼‰
- **ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º**: æœ€å°12pxã€æ¨å¥¨14pxä»¥ä¸Š

### ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œ
- **ãƒ¢ãƒ€ãƒ³ãƒ–ãƒ©ã‚¦ã‚¶**: Chrome 90+, Firefox 88+, Safari 14+
- **ãƒ¢ãƒã‚¤ãƒ«**: iOS Safari 14+, Chrome Mobile 90+
- **JavaScript**: ES2020å¯¾å¿œ
- **CSS**: CSS Grid, Custom Propertieså¯¾å¿œ

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### è¨­è¨ˆæ›¸ï¼ˆã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- **æ½®æ±ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“**: æœ¬æ–‡æ›¸
- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åŸºç›¤**: `/docs/design/fishing-record/architecture.md`
- **UI/UXæ”¹å–„è¨ˆç”»**: `/docs/design/ui-ux-improvement-plan.md`

### å®Ÿè£…ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹
- **å‹å®šç¾©**: `/src/types/tide.ts`
- **è¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³**: `/src/services/tide/`
- **UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: `/src/components/tide/`

### ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ï¼ˆå‚è€ƒã®ã¿ï¼‰
- `/docs/archive/tide-information-system.md` (NOAA APIç‰ˆ)
- `/docs/archive/hybrid-tide-system-design.md` (è©³ç´°è¨­è¨ˆç‰ˆ)
- `/docs/archive/tide-graph-ui-design.md` (UIè©³ç´°ç‰ˆ)

---

**ğŸ¯ ç›®æ¨™**: é‡£ã‚ŠäººãŒ **ã€Œã„ã¤é‡£ã‚ŒãŸã®ã‹ã€ã¨ã€Œãã®æ™‚ã®æ½®ã®çŠ¶æ…‹ã€** ã‚’ç¾ã—ãç›´æ„Ÿçš„ã«ç†è§£ã§ãã‚‹ã€ä¸–ç•Œåˆã®å®Œå…¨ç„¡æ–™ãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ»ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œæ½®æ±ã‚·ã‚¹ãƒ†ãƒ 

**ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**: Phase 1ã®è¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³å®Ÿè£…é–‹å§‹