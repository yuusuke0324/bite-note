# 📋 次のアクション - 明確な実行計画

**最終更新**: 2025-11-06
**現在のフェーズ**: Phase 4完了後

---

## 🎯 即座に実行すべきタスク（今すぐ）

### 1. CI分割ワークフローの問題解決 🔴
**問題**: Integration Testsでファイルが見つからない
**工数**: 30分
**アクション**:
```bash
# 統合テストファイルの確認
find . -name "*.integration.test.*" -type f

# workspace設定の調整が必要な可能性
# vitest.workspace.tsのintegrationプロジェクトのinclude/excludeを確認
```

### 2. Component Testsの結果確認 🟡
**状態**: 実行中
**工数**: 10分
**アクション**:
```bash
# 最新のCI実行状況を確認
gh run list --workflow=ci-split.yml --limit=1
gh run view [RUN_ID] --log
```

---

## 📊 短期タスク（今日〜今週）

### 3. FishSpeciesValidatorテストの仕様調整 🟢
**問題**: 3テストが仕様により失敗
**工数**: 1-2時間
**選択肢**:
- A) テストの期待値を現在の仕様に合わせる
- B) 仕様を変更（最小文字数1文字許可、禁止語の調整等）
- C) 現状維持（ビジネス判断待ち）

### 4. performance-unit.testのspy問題修正 🟢
**問題**: vitest spyが正しく動作していない
**工数**: 1時間
**アクション**:
```typescript
// vi.hoisted()を使用してモックを事前定義
// または vi.mock()の設定を見直し
```

### 5. integration.testのメモリ問題調査 🟡
**問題**: メモリ使用量が期待値を大幅に超過
**工数**: 2-3時間
**アクション**:
- メモリプロファイリング実施
- テストの期待値を現実的な値に調整
- またはメモリ最適化を実施

---

## 📈 中期タスク（来週〜2週間）

### 6. スキップしたテストの段階的復活 📦
**対象**: 8つのskipされたテストファイル
**工数**: 各1-2時間、合計8-16時間
**優先順位**:
1. data-validation-service.test.ts（IndexedDB）
2. useResizeObserver.test.ts（Mock改善済み）
3. ErrorBoundary.test.tsx（React Error）
4. TideChart/TideGraph系（Canvas API）

### 7. CI実行時間のさらなる最適化 ⚡
**目標**: 現在の36秒をさらに短縮
**工数**: 4-6時間
**アプローチ**:
- テストの並列度をさらに上げる
- 不要なセットアップを削減
- キャッシュ戦略の最適化

### 8. E2Eテストの追加 🌐
**目的**: 統合的な動作確認
**工数**: 8-12時間
**内容**:
- Playwright設定
- 主要ユーザーフローのテスト作成
- CI統合

---

## 🚀 長期タスク（1ヶ月以降）

### 9. テストカバレッジ80%達成 📊
**現状**: 約60%（推定）
**目標**: 80%以上
**期間**: 1-2ヶ月

### 10. パフォーマンステストの自動化 📈
**内容**:
- Lighthouse CI統合
- バンドルサイズ監視
- 実行時間のベンチマーク

---

## ✅ 実行チェックリスト

今すぐやること:
- [ ] Integration Testsのファイル問題を修正
- [ ] Component Tests結果を確認
- [ ] 次の優先タスクを決定

今日中にやること:
- [ ] FishSpeciesValidatorの方針決定
- [ ] performance-unit.testの修正着手

今週中にやること:
- [ ] integration.testメモリ問題の調査
- [ ] 最優先のskipテスト1つを復活

---

## 📝 メモ

- CI分割により実行時間は98.8%削減達成
- しかしまだ細かい問題が残っている
- 段階的に改善していく方針で進める
- ビジネス価値の高いものから優先的に対応

---

**このドキュメントを毎日確認して、次のアクションを明確に把握すること**